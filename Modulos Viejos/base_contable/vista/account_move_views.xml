<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <record id="view_move_sequence_number_form" model="ir.ui.view">
            <field name="name">account.invoice.sequence.number.form</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='invoice_date']" position="after">
                  <field name="hora_public" string="Hora de Publicación" readonly="state!='draft'" invisible="state=='draft'"/>
                  <field name="tasa" string="Tasa del dia" readonly="state!='draft'"/>
                </xpath>

                <xpath expr="//field[@name='ref']" position="after">
                  <field name="is_delivery_note" string="x Es nota de Entrega?" invisible="1"/>
                  <field name="hide_book" invisible="1"/>

                  <field name="is_manual" invisible="move_type not in ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt') or is_delivery_note==True"/>

                  <field name="invoice_number_next" readonly="is_manual==False" invisible="move_type not in ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt') or is_delivery_note!=False" required="is_manual==True" string="Nro Factura"/>

                  <field name="invoice_number_control" readonly="is_manual==False" invisible="move_type not in ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt') or is_delivery_note!=False" required="is_manual==True" string="Nro Control"/>


                  <field name="delivery_note_next_number" invisible="is_delivery_note==False or move_type not in ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt')" readonly="move_type in ('out_invoice', 'out_refund','out_receipt')"/>

                  <field name="cond_fact" string="Condición Factura" readonly="state!='draft'" invisible="move_type=='entry'" required="move_type!='entry' and state=='draft'"/>
                  <field name="operation_type" string="Tipo de Operación" readonly="state!='draft'" invisible="move_type=='entry'" required="move_type!='entry'"/>
                  <field name="price_ref_div_product" invisible="move_type=='entry'"/>
                </xpath>

                <xpath expr="//div[@name='journal_div']" position="after">
                  <field name="nro_planilla_exportacion" string="Nro Planilla de Exportaciones" invisible="move_type not in ('out_invoice','out_refund', 'out_receipt') or operation_type=='national'" readonly="state!='draft'"/>
                  <field name="file_name" invisible="1"/>
                  <field name="image" filename="file_name" string="Documento Adjunto"  invisible="move_type not in ('out_invoice','out_refund', 'out_receipt') or operation_type=='national'" readonly="state!='draft'"/>

                  <field name="nro_form_impor" string="Nro de Formulario de Importación" invisible="move_type not in ('in_invoice','in_refund', 'in_receipt') or operation_type=='national'" readonly="state!='draft'"/>
                  <field name="nro_expe_impor" string="Nro Expediente de Importación" invisible="move_type not in ('in_invoice','in_refund', 'in_receipt') or operation_type=='national'" readonly="state!='draft'"/>

                  <field name="observacion" string="Observación"/>
                </xpath>

                <xpath expr="//form[1]/sheet[1]/notebook[1]/page[@name='aml_tab']/field[@name='line_ids']/list[1]/field[@name='credit']" position="after">
                   <field name="debit_div" string="Debe Ref"  sum="debit_div"/>
                  <field name="credit_div" string="Haber Ref" sum="credit_div"/>
                </xpath>


              <xpath expr="//form[1]/sheet[1]/notebook[1]/page[@name='invoice_tab']/field[@name='invoice_line_ids']/list[1]/field[@name='price_unit']" position="after">
                <field name="price_unit_ref" string="Precio REF" optional="show" invisible="currency_id!=company_currency_id"/>
                <field name="linea_exenta" column_invisible="True"/>
              </xpath>

              <xpath expr="//notebook/page[1]/group[1]/group[2]" position="replace">
                <group class="oe_subtotal_footer oe_right" name="footer_der_igtf" >
                    <field name="tax_totals" invisible="1"/>
                    <field name="amount_untaxed" string="Sub-Total"/>
                    <field name="amount_base_imponible" string="Base Imponible"/>
                    <field name="amount_exento" string="Total Exento"/>
                    <field name="amount_tax" string="Total Impuesto"/>
                    <field name="amount_igtf" string="Impuesto igtf" invisible="cond_fact=='cred'"/>
                    <field name="amount_total" string="Total Factura" class="oe_subtotal_footer_separator" invisible="state=='draft' and cond_fact!='cred'"/>
                    <field name="amount_total_aux" string="Total Factura *" class="oe_subtotal_footer_separator" invisible="state!='draft' or cond_fact=='cred'"/>

                    
                    <field name="invoice_payments_widget" colspan="2" nolabel="1" widget="payment"/>
                    <field name="invoice_outstanding_credits_debits_widget" class="oe_invoice_outstanding_credits_debits" colspan="2" nolabel="1" widget="payment" invisible="state != 'posted' or move_type in ('out_receipt', 'in_receipt')"/>
                    <!--boton donde dice añadir-->

                     <field name="amount_residual" string="Monto Adeudado" class="oe_subtotal_footer_separator" invisible="state == 'draft'"/>
                </group>

              </xpath>

              <xpath expr="//page[@name='other_info']" position="before">
                <page string="Registros de Pagos Programados" ><!-- invisible="move_type=='entry' or cond_fact!='cont'" -->
                    <field name="igtf_ids" nolabel="1" readonly="0" >
                        <list string="Igtf" create="0">
                          <field name="account_journal_id" string="Diario"/>
                          <field name="account_payment_method_id" string="Met. Pago" domain="[('journal_id', '=', account_journal_id),('payment_type', '=', 'inbound')]"/>
                          <field name="tasa" string="Tasa a la fecha del doc."/>
                          <field name="moneda" string="Moneda a pagar"/>
                          <field name="monta_a_pagar" string="Monto a pagar"/>
                          <field name="monta_a_pagar_bs" string="Monto eq. a Bs" sum='monta_a_pagar_bs'/>
                          <field name="porcentage" string="% IGTF"/>
                          <field name="monto_ret_bs" string="Monto Ret. IGTF (Bs)" sum='monto_ret_bs'/>
                          <field name="asiento_igtf" string="As.IGTF"/>
                        </list>
                    </field>
                </page>

              </xpath>

              <xpath expr="//button[@name='action_post']" position="before">
                  <button name="pago_prog" string="Registrar Metodos de Pagos" type="object" class="oe_highlight" invisible="cond_fact=='cred' or state!='draft' or move_type in ('in_refund','out_refund') or move_type=='entry'"/>
              </xpath>

            </field>
        </record>

         <record id="account_move_inerhit_conv" model="ir.ui.view">
          <field name="name">account.move.inerhit.conv</field>
          <field name="model">account.move</field>
          <field name="inherit_id" ref="account.view_move_tree"/>
          <field name="arch" type="xml">
             <xpath expr="//field[@name='amount_total_signed']" position="after">    
                  <field name="tasa" string="Tasa del dia" optional="show"/>
                  <field name="amount_total_signed_div" string="Total $" sum="amount_total_signed_div" optional="show"/>
                
              </xpath>
          </field>
        </record>

        <record id="view_out_invoice_tree_inherit" model="ir.ui.view">
          <field name="name">view.out.invoice.tree.inherit</field>
          <field name="model">account.move</field>
          <field name="inherit_id" ref="account.view_out_invoice_tree"/>
          <field name="arch" type="xml">
             <xpath expr="//field[@name='amount_total_in_currency_signed']" position="after">    
                  <field name="tasa" string="Tasa del dia" optional="show"/>
                  <field name="amount_total_signed_div" string="Total $" sum="amount_total_signed_div" optional="show"/>
                
              </xpath>
          </field>
        </record>

        <record id="view_in_invoice_tree_inherit" model="ir.ui.view">
          <field name="name">view.in.invoice.tree.inherit</field>
          <field name="model">account.move</field>
          <field name="inherit_id" ref="account.view_in_invoice_bill_tree"/>
          <field name="arch" type="xml">
             <xpath expr="//field[@name='amount_total_in_currency_signed']" position="after">    
                  <field name="tasa" string="Tasa del dia" optional="show"/>
                  <field name="amount_total_signed_div" string="Total $" sum="amount_total_signed_div" optional="show"/>
                
              </xpath>
          </field>
        </record>
    
    <!-- *************************************************************************** -->


        <record id="account_move_line_inerhit_apunt_conta" model="ir.ui.view">
        <field name="name">account.move.line.inerhit.apunt.cont</field>
        <field name="model">account.move.line</field>
        <field name="inherit_id" ref="account.view_move_line_tree"/>
        <field name="arch" type="xml">
           <xpath expr="//field[@name='amount_currency']" position="before">  
                <field name="debit_div" string="Debito $" sum="debit_div"/>
                <field name="credit_div" string="Credito $" sum="credit_div"/>
              
            </xpath>
        </field>
        </record>


        <record id="account_move_line_inerhit_convv" model="ir.ui.view">
            <field name="name">account.move.line.inerhit.convv</field>
            <field name="model">account.move.line</field>
            <field name="inherit_id" ref="account.view_move_line_tree_grouped_sales_purchases"/>
            <field name="arch" type="xml">
               <xpath expr="//field[@name='credit']" position="after">  
                    <field name="debit_div" string="Debito $" sum="debit_div"/>
                    <field name="credit_div" string="Credito $" sum="credit_div"/>
                  
                </xpath>
            </field>
        </record>

      
    </data>
</odoo>